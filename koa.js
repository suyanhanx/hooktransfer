let correct = 'data:image/jpeg;base64,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'

let x = 'data:image/jpeg;base64,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'

// 一个koa2的写法

var koa = require('koa')
var Router = require('koa-router')
var dingRobot = require('./robot')
var bodyParser = require('koa-bodyparser')

import token from './token'

var app = new koa()
var router = new Router()
var robot = new dingRobot(token)

const transPic = status => {
    switch (status) {
        case 'passed':
            return correct
        case 'failed':
            return x
        default:
            return ''
    }
}

const parsePostData = ctx => {
    return new Promise((resolve, reject) => {
        try {
            let postdata = ''
            ctx.req.addListener('data', (data) => {
                postdata += data
            })
            ctx.req.addListener('end', function () {
                let parseData = parseQueryStr(postdata)
                resolve(parseData)
            })
        } catch (err) {
            reject(err)
        }
    })
}

// 将POST请求参数字符串解析成JSON
function parseQueryStr(queryStr) {
    let queryStrList = queryStr.replace('\r\n', '')
    return queryStrList
}

router.post('/api', async (ctx, next) => {
    let body = JSON.parse(await parsePostData(ctx))
    if (body['object_kind'] === 'pipeline') {
        robot.send({
            msgtype: 'link',
            link: {
                text: `分支：${body["object_attributes"]["ref"]} 耗时：${body["object_attributes"]["duration"]}`,
                picUrl: transPic(body["object_attributes"]["status"]),
                title: `${body.project.name}#${body["object_attributes"].id} 构建${body["object_attributes"]["detailed_status"]}`,
                messageUrl: `${body.project['web_url']}`
            }
        }, function (err, data) {
            if (err) {
                console.error(err)
                return;
            }
            console.log(data)
        })
    }

    ctx.response.body = {"errmsg": "ok", "errcode": 0}
    next()
})

app
    .use(router.routes())
    .use(router.allowedMethods())

app.use(bodyParser())
app.listen('4000')